this files controls the logic of the map and forms